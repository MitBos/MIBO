@* Summary: Edits core method configuration metadata such as name and optional auth/rate limits. *@
@*
    IntegrationConfigPanel.razor
    ----------------------------
    Purpose:
    Displays and edits the core method configuration metadata:
    - Integration (method) name
    - Optional API key and rate limit settings

    Parameters:
    - Config (IntegrationConfig):
        The method configuration being edited.
*@

@using MIBO.Domain.Models

<div class="panel">
    <div class="panel-header">
        <div>
            <div class="panel-title">Method configuration</div>
            <div class="panel-subtitle">Basic metadata for this method.</div>
        </div>
    </div>

    <div class="form-row">
        <label>Method name</label><br />
        <InputText class="input-md" @bind-Value="Config.Name" />
        <ValidationMessage For="@(() => Config.Name)" />
        <div class="helper">This value identifies the method configuration.</div>
    </div>

    <div class="form-row mt-2">
        <label>API key (optional)</label><br />
        <InputText class="input-md" @bind-Value="Config.ApiKey" placeholder="Enter API key if required" />
        <ValidationMessage For="@(() => Config.ApiKey)" />
        <div class="helper">
            Clients must send this key via header <code>X-MIBO-API-KEY</code> or query parameter <code>?api_key=...</code>.
        </div>
    </div>

    <div class="form-row mt-2">
        <label>Rate limit (requests per minute)</label><br />
        <InputNumber class="input-md" @bind-Value="Config.RateLimitPerMinute" />
        <ValidationMessage For="@(() => Config.RateLimitPerMinute)" />
        <div class="helper">
            Leave empty or 0 to disable rate limiting.
        </div>
    </div>
</div>

@code {
    [Parameter] public IntegrationConfig Config { get; set; } = default!;
}
